<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
</head>
<body>
    <h1><%= title %></h1>
    
    <% if (message) { %>
        <p><strong><%= message %></strong></p>
    <% } %>
    
    <h2>Lista de Pacientes</h2>
    
    <% if (pacientes && pacientes.length > 0) { %>
        <table border="1">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Apellidos</th>
                    <th>Fecha de Nacimiento</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <% pacientes.forEach(paciente => { %>
                    <tr>
                        <td><%= paciente.id %></td>
                        <td><%= paciente.nombre %></td>
                        <td><%= paciente.apellidos %></td>
                        <td><%= paciente.fechaDeNacimiento %></td>
                        <td>
                            <a href="/pacientes/<%= paciente.id %>">Ver</a>
                            <a href="/pacientes/editar/<%= paciente.id %>">Editar</a>
                            <form action="/pacientes/<%= paciente.id %>?_method=DELETE" method="POST" style="display:inline;">
                                <button type="submit">Eliminar</button>
                            </form>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    <% } else { %>
        <p>No hay pacientes registrados.</p>
    <% } %>
    
    <h3>Agregar Nuevo Paciente</h3>
    <form action="/pacientes" method="POST">
        <div>
            <label>Nombre:</label>
            <input type="text" name="nombre" required>
        </div>
        <div>
            <label>Apellidos:</label>
            <input type="text" name="apellidos" required>
        </div>
        <div>
            <label>Fecha de Nacimiento:</label>
            <input type="date" name="fechaDeNacimiento" required>
        </div>
        <button type="submit">Crear Paciente</button>
    </form>
    
    <hr>
    <p><a href="/pacientes">Actualizar lista</a></p>
</body>
</html>